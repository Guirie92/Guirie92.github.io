<html lang="en">
<head><meta name="color-scheme" content="dark">
<link rel="icon" href="/images/favicon.png"/>


<script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>


<link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
      rel="stylesheet"/>


<link rel="stylesheet" href="https://use.typekit.net/cab2nhr.css">





<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
    
    <symbol id="icon-copy" viewBox="0 0 24 24" fill="#c4c7c5" >
        <path d="M20,4V16a2,2,0,0,1-2,2H10a2,2,0,0,1-2-2V4a2,2,0,0,1,2-2h8A2,2,0,0,1,20,4ZM16,21a1,1,0,0,0-1-1H6V6A1,1,0,0,0,4,6V20a2,2,0,0,0,2,2h9A1,1,0,0,0,16,21Z"></path>
    </symbol>
    
    
    <symbol id="icon-checkmark" viewBox="0 0 533.973 533.973" fill="#c4c7c5">

        <polygon points="202.624,478.016 0,291.36 70.512,214.8 191.968,326.656 431.44,33.984 512,99.904 "></polygon>
    </symbol>
</svg>

























<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta name="author" content="Guille Sanchez">

    <title>Poker Chip Counter | Guille Sanchez | Programming - Game Dev - Illustration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="referrer" content="always">
    <meta name="robots" content="all">
    <meta name="keywords" content="Poker Chip Counter, game programming, Guille Sanchez, c++, c#, portfolio">
    <meta name="description" content="Poker Chip Counter is a cross-platform mobile app designed to simplify the management of Texas Hold'em poker tournaments">
    <meta name="generator" content="SEOmatic">
    <link rel="canonical" href="http://guillesanchez.com/projects/poker-chip-counter">


    
    <meta name="dcterms.Identifier" content="http://guillesanchez.com/projects/poker-chip-counter">
    <meta name="dcterms.Format" content="text/html">
    <meta name="dcterms.Relation" content="Guille Sanchez – Programming - Game Dev - Illustration">
    <meta name="dcterms.Language" content="en">
    <meta name="dcterms.Publisher" content="Guille Sanchez – Programming - Game Dev - Illustration">
    <meta name="dcterms.Type" content="text/html">
    <meta name="dcterms.Coverage" content="http://guillesanchez.com/">
    <meta name="dcterms.Rights" content="Copyright ©2023 Guille Sanchez." id="copyrightMeta">
    <meta name="dcterms.Title" content="Poker Chip Counter">
    <meta name="dcterms.Subject" content="Poker Chip Counter, game dev, game programming, Guille Sanchez, c#, portfolio">
    <meta name="dcterms.Contributor" content="Guille Sanchez – Programming - Game Dev - Illustration">
    <meta name="dcterms.Date" content="2023-12-01" id="contentDate">
    <meta name="dcterms.Description" content="Poker Chip Counter is a cross-platform mobile app designed to simplify the management of Texas Hold'em poker tournaments">
    <link type="text/plain" rel="author" href="/humans.txt">


    

    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebSite",
            "name": "Guille Sanchez – Programming - Game Dev - Illustration",
            "description": "Programming - Game Dev - Illustration Portfolio of Guille Sanchez.",
            "url": "http://guillesanchez.com/",
            "image": "http://guillesanchez.com/assets/siteBG.jpg",
            "sameAs": ["https://twitter.com/PutlsimoRandom"],
            "copyrightHolder": {
                "@type": "Person",
                "name": "Guille Sanchez",
                "url": "http://guillesanchez.com/",
                "sameAs": ["https://twitter.com/PutlsimoRandom"],
                "gender": "Male"
            },
            "author": {
                "@type": "Person",
                "name": "Guille Sanchez",
                "url": "http://guillesanchez.com/",
                "sameAs": ["https://twitter.com/PutlsimoRandom"],
                "gender": "Male"
            },
            "creator": {
                "@type": "Organization"
            }
        }
    </script>

    

    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "WebPage",
            "name": "Poker Chip Counter",
            "description": "Poker Chip Counter is a cross-platform mobile app designed to simplify the management of Texas Hold'em poker tournaments",
            "image": {
                "@type": "ImageObject",
                "url": "http://guillesanchez.com/assets/siteBG.jpg",
                "width": "512",
                "height": "276"
            },
            "url": "http://guillesanchez.com/projects/poker-chip-counter",
            "mainEntityOfPage": "http://guillesanchez.com/projects/poker-chip-counter",
            "breadcrumb": {
                "@type": "BreadcrumbList",
                "itemListElement": [
                    {
                        "@type": "ListItem",
                        "position": "1",
                        "item": {
                            "@id": "http://guillesanchez.com/",
                            "name": "Welcome to guillesanchez.com"
                        }
                    },
                    {
                        "@type": "ListItem",
                        "position": "2",
                        "item": {
                            "@id": "http://guillesanchez.com/projects/poker-chip-counter",
                            "name": "Poker Chip Counter"
                        }
                    }
                ]
            }
        }
    </script>

    

    <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "BreadcrumbList",
            "itemListElement": [
                {
                    "@type": "ListItem",
                    "position": "1",
                    "item": {
                        "@id": "http://guillesanchez.com/",
                        "name": "Welcome to guillesanchez.com"
                    }
                },
                {
                    "@type": "ListItem",
                    "position": "2",
                    "item": {
                        "@id": "http://guillesanchez.com/projects/poker-chip-counter",
                        "name": "Poker Chip Counter"
                    }
                }
            ]
        }
    </script>

    

    <title>Guille Sanchez – Programming - Game Dev - Illustration</title>

    
    
    <link href="https://fonts.googleapis.com/css?family=Arvo" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">

    
    <script type="text/javascript">
        var _siteUrl = "http://guillesanchez.com/";
        var _livePreview = false;

    </script>


    <link rel="stylesheet" type="text/css" href="/css/projects/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/css/projects/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/projects/nav.css">
    <link rel="stylesheet" type="text/css" href="/css/projects/code-prettify.css">
    
    

</head>
<body style="background-color: #000;">

    
<meta charset="UTF-8">

<link rel="icon" href="images/favicon.png" /> 

<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
    <div class="container px-4 px-lg-5">
        
        
        
        <a class="navbar-brand" href="/#page-top" style="font-family: 'proxima-nova-condensed', sans-serif; text-transform: uppercase; color: #fff; font-weight: 100; letter-spacing: 0rem;">
            GUILLE SANCHEZ dM. H.<img src="">
        </a>

        

        <div data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" class="header-burger d-lg-none absolute z-50 ml-2">
            <button id="primary-nav-burger-toggle" type="button" aria-controls="primary-nav-mobile" aria-expanded="false" class="burger burger-button relative z-50 block h-12 px-3 bg-transparent rounded-none cursor-pointer transition-color duration-200 lg:hidden">
                <span class="sr-only"></span>
                <span class="block w-full h-full transform">
                    <span class="burgerMenu-bar burgerMenu-1"></span>
                    <span class="burgerMenu-bar burgerMenu-2"></span>
                    <span class="burgerMenu-bar burgerMenu-3"></span>
                </span>
            </button>
        </div>

        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ms-auto">
                
                <li class="nav-item"><a class="nav-link" href="/#about" style="font-family: 'dinosaur', sans-serif; text-transform: uppercase">About</a></li>
                
                <li class="nav-item"><a class="nav-link" href="/#skills" style="font-family: 'dinosaur', sans-serif; text-transform: uppercase">Skills</a></li>
                
                <li class="nav-item"><a class="nav-link" href="/#projects" style="font-family: 'dinosaur', sans-serif; text-transform: uppercase">Projects</a></li>
                
                <li class="nav-item"><a class="nav-link" href="/#contact" style="font-family: 'dinosaur', sans-serif; text-transform: uppercase">Contact</a></li>
                
                
                
                
                
                
                

                <li class="nav-item">
                    
                    <a class="nav-link" href="/files/resume-2025.pdf" target="_blank" style="font-family: 'dinosaur', sans-serif; text-transform: uppercase;">
                        Resume
                        <div id="mainNav-resume"></div>
                    </a>
                    
                </li>
                
            </ul>
        </div>
    </div>
</nav><script>
        
        
        
        
        
        
        
        
        
        
        
        
        
        

    </script>
    

    <div id="page-container">

        <div id="background-frame">

            
        </div>

        <div id="page">
            <div id="project-container" class="" style="opacity: 1; display: block;">
                <div class="container project-contents">
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12">
                            
                            <div class="project-title-container">
                                <div class="project-title">
                                    <span>Poker Chip Counter</span>
                                </div>
                            </div>
                            

                            <p><img src="/images/PokerChipCounter-BG.jpg" class="centered-img" style="vertical-align:middle;height:auto;"></p>

                            

                            <div class="project-info-container">
                                <table style="margin: auto;">
                                    <tbody>
                                        <tr>
                                            <td class="project-info-cell"><span class="text-blue">Platform:</span></td>
                                            <td class="project-info-cell">iOS (App Store), Android (Google Play Store), PC (Windows/Mac)</td>
                                        </tr>
                                        <tr>
                                            <td class="project-info-cell"><span class="text-blue">Engine:</span></td>
                                            <td class="project-info-cell">Unity</td>
                                        </tr>
                                        <tr>
                                            <td class="project-info-cell"><span class="text-blue">Language:</span></td>
                                            <td class="project-info-cell">C#</td>
                                        </tr>
                                        <tr>
                                            <td class="project-info-cell"><span class="text-blue">Tools Used:</span></td>
                                            <td class="project-info-cell">Visual Studio, Photoshop, Audition, After Effects</td>
                                        </tr>
                                        <tr>
                                            <td class="project-info-cell"><span class="text-blue">Duration:</span></td>
                                            <td class="project-info-cell">5 months</td>
                                        </tr>
                                        <tr>
                                            <td class="project-info-cell"><span class="text-blue">Completion:</span></td>
                                            <td class="project-info-cell">2023</td>
                                        </tr>
                                        <tr>
                                            <td class="project-info-cell"><span class="text-blue">Role:</span></td>
                                            <td class="project-info-cell"> Concept development, gameplay programming, graphic design,<br />SFX programming, UI development, testing, debugging,<br />ads/in-app purchases programming, and publishing</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            
                            <div class="project-contents">

                                <p><a href="https://play.google.com/store/apps/details?id=com.EldrGames.PokerChipCounter" target="_blank" rel="noreferrer noopener"><img src="/images/google-play-badge.png"></a><br></p>
                                <p><a href="https://apps.apple.com/es/app/contador-fichas-poker-holdem/id1670010351?l=en-GB?l=en" target="_blank" rel="noreferrer noopener"><img src="/images/apple-app-store-badge.png"></a><br></p>

                                <p>
                                </p>
                                <p style="padding-top: 20px;">
                                    Poker Chip Counter is a tool that takes care of all calculations of a Hold'em poker tournament.
                                    The concept for this project stemmed from the idea of playing with friends and not having to
                                    do the maths behind bets, pots, and side pots, or knowing/remembering all the betting rules.
                                    Also, it provides a user interface and game board to track of everyone's
                                    chip stacks, timers, and blind levels.
                                </p>
                                <p>

                                </p>

                                <div class="videoWrapper">
                                    <iframe src="https://www.youtube.com/embed/Ndv1rFbBeeU" frameborder="0" allowfullscreen=""></iframe>
                                </div>
                                <p style="padding-bottom: 10px"></p>


                                <div class="accordion">
                                    <div class="accordion-header">
                                        <i aria-hidden="true"></i>
                                        <span class="accordion-text" style="margin-left: 5px;">Multiplayer System (NGO)</span>
                                        <div class="accordion-icon">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-inner">

                                    <p>
                                        The app was initially developed for single-user management of the tournament.
                                        You could input all the players, assign their chips, and set up other tournament details.
                                        The app could be displayed on a larger screen for everyone to view stats like chip stacks,
                                        timers, blinds, and more.
                                        Alternatively, the app holder could act as a dealer,
                                        announcing the game stats and betting information.
                                    </p>

                                    <p>
                                        After completing this phase, I integrated a multiplayer feature.
                                        Now, players with the app can connect locally, share live stats on their devices,
                                        and perform actions independently,
                                        ensuring real-time updates for all connected players.
                                    </p>

                                    <p>
                                        To do so, a host/server setup was implemented for client connections.
                                        Communication between apps is managed via Server RPC and Client RPC.
                                        For example, the following code demonstrates a typical network interaction:
                                    </p>

                                    <pre id="RPCs" class="prettyprint linenums custom-prettify" style=""></pre>

                                    <p>
                                        Here, <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">[ServerRpc(RequireOwnership = false)]</code>
                                        allows any client to perform the 'fold' action and inform others.
                                        Without
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">RequireOwnership = false</code>
                                        , only the host could execute
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">[ServerRpc]</code>
                                        functions.
                                        Once a player initiates
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">Fold_ServerRpc</code>
                                        , the
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">Fold_ClientRpc</code>
                                        function synchronizes this action across all devices.
                                    </p>

                                    
                                    <p>
                                        <video autoplay loop muted playsinline style="max-width: 100%; height: auto; padding-bottom: 10px; padding-top: 10px; ">
                                            <source src="https://i.imgur.com/H46qOxO.mp4" type="video/mp4">
                                            Your browser does not support the video tag.
                                        </video>
                                    </p>

                                    <p>
                                        In the GIF above, when Vin folds,
                                        the
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">playerBoxShadowArray</code>
                                        is enabled, and the corresponding SFX is triggered.
                                        Naturally this behavior, along with the updated player information, is communicated across all devices.
                                        All stats are stored in a Scriptable Object, making the different components of the app
                                        and their communication modular and independent.
                                    </p>

                                    <p style="padding-bottom: 10px"></p>

                                    <p>
                                        One of the initial networking challenges was the transfer of game data.
                                        When players join, the host needs to share the tournament
                                        setup and info with them. At the start, this is manageable with simple parameters being
                                        passed in within a function.
                                    </p>

                                    <pre id="SimpleNetworkTransfer" class="prettyprint linenums custom-prettify" style=""></pre>

                                    <p>
                                        However, this approach becomes impractical and unsustainable for larger data sets,
                                        such as those required when a player rejoins a game mid-session.
                                        In these scenarios, the data set involves a vast number of parameters, and it also includes
                                        complex data types like arrays, lists, or dictionaries.
                                    </p>

                                    <p>
                                        <video autoplay loop muted playsinline style="max-width: 100%; height: auto; padding-bottom: 10px; padding-top: 10px; ">
                                            <source src="https://imgur.com/AunkFtM.mp4" type="video/mp4">
                                            Your browser does not support the video tag.
                                        </video>
                                    </p>

                                    <p>
                                        To handle this, I implemented serialization/deserialization with
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">INetworkSerializable</code>
                                        structs for efficient data transfer.
                                        For instance, the following is an example of a struct that handles simple data types:
                                    </p>

                                    <pre id="SimpleGameStats" class="prettyprint linenums custom-prettify" style=""></pre>

                                    <p>
                                        The first thing to do is to provide the parameters we want to expose to the serializer. The
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">NetworkSerialize</code>
                                        method uses a
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">BufferSerializer&lt;T&gt;</code>
                                        object to handle the actual serialization process. The
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">SerializeValue</code>
                                        here is used to convert each field of the struct into a format suitable for network transmission.
                                    </p>
                                    <p>
                                        Complex types required a different approach, as shown in the following array serialization example:
                                    </p>

                                    <pre id="ArrayGameStats" class="prettyprint linenums custom-prettify" style=""></pre>

                                    <p>
                                        First, when the serializer is not in 'reader' mode, we initialize the arrays' length
                                        to fixed values predefined in the game database. This initialization is
                                        important as it standardizes the array sizes for consistent
                                        serialization/deserialization processes. We then use
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">serializer.SerializeValue</code>
                                        to serialize the length of these arrays,
                                        ensuring that the receiving end knows exactly how much data to expect.
                                    </p>
                                    <p>
                                        Next, I handled the deserialization process within the
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">if (serializer.IsReader)</code>
                                        block. This segment is designed to
                                        set up the necessary data structures for incoming data. It prepares the environment
                                        to correctly interpret and allocate
                                        the data being received from the network.
                                    </p>
                                    <p>
                                        The final part of the process is handled within
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">for</code>
                                        loops. The operation within these loops depends on the serializer's
                                        current mode. In 'writer' mode, each element of the arrays is serialized
                                        and sent over the network. Conversely, in 'reader' mode, the incoming data from
                                        the network is deserialized and stored into the arrays. This dual functionality
                                        ensures that data can be accurately transmitted in both directions across the network.
                                    </p>
                                    <p>
                                        With our data now correctly structured for network transmission,
                                        the process of handling client reconnections becomes
                                        streamlined. Upon reconnection, a client identifies itself to the server using its
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">ulong clientId</code>
                                        . This identification
                                        enables the server/host to execute a specific function designed to update the struct
                                        parameters. These parameters are then
                                        set to match the current values held on the server side,
                                        ensuring that the client's state is synchronized with the server:
                                    </p>

                                    <pre id="ServerSideNetworkUpdate" class="prettyprint linenums custom-prettify" style=""></pre>

                                    <p>
                                        After completing the update of all relevant values, the system initiates the process
                                        of synchronizing the client's state with
                                        the server. This synchronization starts with the preparation of a
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">[ClientRPC]</code>
                                        call. We use targeted
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">clientRpcParams</code>
                                        , specifically the
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">clientId</code>
                                        provided during the reconnection phase, to ensure that the message is directed to the correct client.
                                    </p>
                                    <p>
                                        We then invoke the
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">UpdateNetworkVariables_ClientRpc</code>
                                        function, which is designed to be executed on the client's side to perform
                                        the inverse of the server-side operation: updating the client's game stats with the
                                        latest values received from the server. This
                                        ensures that the client's game state is in full alignment with the server's data.
                                    </p>

                                    <pre id="ClientSideNetworkUpdate" class="prettyprint linenums custom-prettify" style=""></pre>

                                    <p>
                                        With the client's data now fully updated, I trigger an event via a Scriptable Object
                                        to signal this update. Both the Game Manager and the UI Manager independently
                                        hook up to this event, updating their respective elements and variables.
                                        This process ensures that, upon scene loading, all UI elements accurately reflect the current game state,
                                        maintaining synchronization with other players in the network.
                                    </p>

                                    <p>
                                        <video autoplay loop muted playsinline style="max-width: 100%; height: auto; padding-bottom: 10px; padding-top: 10px; ">
                                            <source src="https://imgur.com/RTLmDLf.mp4" type="video/mp4">
                                            Your browser does not support the video tag.
                                        </video>
                                    </p>

                                    <p>
                                        In the GIF above, 'Player' has placed a bet of 1,129 chips (a raise of 1,079 chips)
                                        while 'Player2' was disconnected. During this period, Player's turn timers,
                                        as well as tournament and blind timers, were actively
                                        counting down. Upon 'Player2's reconnection, the system effectively updated and
                                        synchronized all this critical info.
                                        This system showcases the update process, ensuring that reconnected players
                                        receive an accurate representation of the game state immediately after reestablishing
                                        the connection.
                                        This includes the latest bets, current pot, side pots and timer states, and
                                        other relevant information.
                                    </p>

                                    <p style="padding-bottom: 10px"></p>


                                    
                                </div>
                                <div class="accordion">
                                    <div class="accordion-header">
                                        <span class="accordion-text" style="margin-left: 5px;">Gameplay</span>
                                        <div class="accordion-icon">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-inner">

                                    <p>
                                        The app follows an Event-Driven architecture where actions trigger specific events,
                                        and various game components react accordingly. My primary goal was to establish
                                        a clear-cut separation of
                                        the game's multiple components, such as game logic, visuals/graphics, UI, sound effects, etc.
                                        This approach allows for a clean and modular design, where different parts of the game
                                        interact independently without needing direct knowledge of each other.
                                    </p>

                                    <p>
                                        I'll showcase this with a few examples.
                                    </p>

                                    <p style="padding-bottom: 10px"></p>
                                    <p class="text-blue" style="font-size: 17px">
                                        Round Initiation and Betting Mechanics
                                    </p>

                                    <p>
                                        At the beginning of each round, players holding blinds automatically bet the corresponding
                                        bet amounts. It uses a coroutine that adds a small delay in the sequence of
                                        events for a visual representation.
                                        For instance, when the small blind bet is placed, there's a 0.2s delay before
                                        the big blind bet follows:
                                    </p>

                                    <pre id="6" class="prettyprint linenums custom-prettify" style=""></pre>

                                    <p>
                                        The
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">Bet_SmallBlind</code>
                                        coroutine adds a small delay (for visual purposes) and processes the small blind
                                        value for a given player based on their current stack. This information is then communicated via an event
                                        request through a scriptable object that manages events. In the Scriptable Object, events are handled
                                        using
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">UnityActions</code>
                                        (although delegates or any other event system would be fine too):
                                    </p>

                                    <pre id="8" class="prettyprint linenums custom-prettify" style=""></pre>


                                    <p>
                                        In this case, the Bet Manager script calls the event on the Scriptable Object
                                        that handles event requests, and the UI Manager script hooks up to this event, so it will update
                                        the UI information appropriately every time a bet is placed. This is the case for most scripts:
                                        they don't need to know about each other; instead, they handle only what they are supposed to and
                                        only then send a 'message' to inform other components which can listen if they are interested.
                                    </p>

                                    <p style="padding-bottom: 10px"></p>
                                    <p class="text-blue" style="font-size: 17px">
                                        Player Turn Management and Coroutine States
                                    </p>

                                    <p>
                                        I also made use of coroutines to manage players' turns. Depending on the stage phase
                                        and the Blind position, the correct player in a Texas Hold'em tournament is given the turn. The turn
                                        timer uses a coroutine that ticks down the player's clock. Within this period, the player's action buttons
                                        are displayed, and the turn will pass to the next player at the table after they choose an action, or the
                                        timer runs out. It's important for these coroutines to be able to interrupt their action gracefully to avoid
                                        bugs or interaction conflicts, so I made an explicit list of coroutine modes using enums:
                                    </p>

                                    <pre id="9" class="prettyprint linenums custom-prettify" style=""></pre>


                                    <p>
                                        The coroutines have two states: Active or Inactive. Depending on the state, we can trigger
                                        an action to force them to either Stop or Reset.
                                        A simple example of this is the following:
                                    </p>

                                    <pre id="10" class="prettyprint linenums custom-prettify" style=""></pre>


                                    <p>
                                        If the coroutine is running and the player performs an action mid-coroutine,
                                        thus the coroutine is in the Active state, we could either stop it or reset it. This is good
                                        because inside of it, the coroutine can perform a series of actions based on the 'state'
                                        before exiting. For instance:
                                    </p>

                                    <pre id="11" class="prettyprint linenums custom-prettify" style=""></pre>

                                    <p>
                                        When the coroutine stops by
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">CoroutineState.Stop</code>
                                        , the code inside the
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">if</code>
                                        block gets executed before the
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">yield break</code>
                                        . We set the Coroutine state to Inactive, then we stop the coroutine by calling its reference (
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">playerTurnCoroutine</code>
                                        ) and make it null so that it can be used later. Finally, we exit the coroutine right there
                                        before triggering any other logic down the function.
                                    </p>

                                    <p>
                                        Likewise, when the coroutine resets by
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">CoroutineState.Reset</code>
                                        , specific logic that involves specific updates and events would trigger before the resetting.
                                    </p>

                                    

                                    <p style="padding-bottom: 10px"></p>
                                </div>

                                
                                <div class="accordion">
                                    <div class="accordion-header">
                                        <span class="accordion-text" style="margin-left: 5px;">Animations</span>
                                        <div class="accordion-icon">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-inner">

                                    <p>
                                        All animations in this project are achieved by directly manipulating
                                        the transform properties of objects via code, which is more efficient
                                        and less messy compared to alternatives like the Animator.
                                        An animation I'd like to highlight is the movement of blinds
                                        across the table, following a Bezier curve to form an ellipsoid shape.
                                        To establish this curve, I defined
                                        four positions to act as guiding points for all the compounding waypoints:
                                    </p>

                                    <div style="padding-bottom: 10px; padding-top: 10px;">
                                        <img src="https://i.imgur.com/Z6p5UzM.png" alt="Slider Layout">
                                    </div>

                                    <p>
                                        I refer to these guiding points as Control Points.
                                        The transform positions of the Control Points are just stored
                                        as Vector2. Then, I implemented the
                                        quadratic Bezier curve formula <i>(P(t)=(1−t)2⋅P0+2⋅(1−t)⋅t⋅P1+t2⋅P2)</i>,
                                        which takes into account the positions of the control points
                                        to calculate the waypoints representing the trajectory of the curve:
                                    </p>

                                    <pre id="16" class="prettyprint linenums custom-prettify" style=""></pre>
                                    <p>
                                        This method iterates over
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">t</code>
                                        with an increment of 0.05 within a range that goes from 0 to 1,
                                        resulting in 20 waypoints (1/0.05) for each curve. With two mirrored
                                        curves, we achieve an ellipsoid shape as depicted in the image below:
                                    </p>

                                    <div style="padding-bottom: 10px; padding-top: 10px;">
                                        <img src="https://i.imgur.com/W7ZCKhj.png" alt="Slider Layout">
                                    </div>

                                    <p>
                                        All waypoints defining the ellipsoid shape are stored in a list,
                                        ready to be used for animating the blinds along the path:
                                    </p>

                                    <pre id="17" class="prettyprint linenums custom-prettify" style=""></pre>


                                    <p>
                                        The coroutine begins by initializing the object's current position and iterates over
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">t</code>

                                        values, incrementing them based on time and speed. Using linear
                                        interpolation, it calculates the position of the blind between the
                                        current index and the next index along the curve. Each iteration
                                        systematically manages index transitions to ensure smooth movement
                                        along the waypoints. The coroutine monitors the index count to determine
                                        when to exit upon reaching the target waypoint of the movement sequence.
                                    </p>

                                    <p>
                                        <video autoplay loop muted playsinline style="max-width: 100%; height: auto; padding-bottom: 10px; padding-top: 10px; ">
                                            <source src="https://i.imgur.com/8LpRVE5.mp4" type="video/mp4">
                                            Your browser does not support the video tag.
                                        </video>
                                    </p>

                                    <p style="padding-bottom: 10px"></p>

                                </div>

                                
                                <div class="accordion-inner">
                                </div>
                                
                                <div class="accordion">
                                    <div class="accordion-header">
                                        <span class="accordion-text" style="margin-left: 5px;">Graphics</span>
                                        <div class="accordion-icon">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="accordion-inner">

                                    <p>
                                        All visual assets, except for UI buttons, were hand-drawn using
                                        Photoshop and fine-tuned with optimized import settings
                                        when brought into the engine. Because manually
                                        creating assets is time consuming, it's important to apply
                                        time-saving techniques wherever possible.
                                        Take the chipset assets as an example:
                                    </p>

                                    

                                    <div style="<!--text-align: center;--> padding-bottom: 10px; padding-top: 10px;">
                                        <img src="/images/chipSet.png" alt="Chip Set Image" style="width: auto; height: auto; max-width: 100%;">
                                    </div>

                                    <p style="padding-bottom: 10px"></p>

                                    <p>
                                        Each asset shares common design elements but differs
                                        in chip type and color values. This approach is similar to
                                        the concept of prefab variants, using a base template that
                                        accommodates multiple variations, combined with postprocessing
                                        effects like shadows, lighting, color, etc. In situations like
                                        this, you can choose to either pre-bake all chip assets into the
                                        engine or use only a few base templates and apply
                                        postprocessing effects dynamically within the engine. The former
                                        takes-up more memory while saving CPU processing time,
                                        whereas the latter is more CPU-intensive but requires less memory.
                                        Since the chip assets in this
                                        project are small (32x32 pixels) and have a negligible
                                        memory footprint, I decided to bake them in directly in
                                        a Sprite Atlas.
                                    </p>

                                    
                                    

                                    <p>
                                        It's important to consider
                                        that many of these assets are active simultaneously during
                                        gameplay. With potentially hundreds of chipsets on screen at once,
                                        managing the assets properly is key for maintaining optimal performance
                                        across different devices.
                                    </p>
                                    <p>
                                        Rather than repeatedly instantiating and destroying chips,
                                        which can incur significant overhead, I've implemented pooling
                                        systems to manage them. By preallocating a pool of chipsets at
                                        the start and dynamically enabling and disabling them as needed,
                                        we minimize the performance impact associated with object
                                        creation and destruction.
                                    </p>

                                    <p style="padding-bottom: 10px"></p>
                                    <p class="text-blue" style="font-size: 17px">
                                        User Interface
                                    </p>

                                    <p>
                                        I used built-in UI components for handling static graphics
                                        such as buttons, sliders, blinds, chips, etc. Canvases simplify
                                        the process since they support anchoring of elements and resolution
                                        scaling, which is necessary for multiplatform development.
                                    </p>
                                    <p>
                                        A correct use of anchors and pivots is key when dealing with
                                        dynamic UI elements. Anchors define an element's position relative
                                        to its parent, while pivots determine the point within the element
                                        that its position, rotation, and scale are based on. The idea is
                                        to manipulate these settings in a way that ensures UI elements
                                        adapt properly
                                        across different screen sizes and resolutions, as is the case for
                                        mobile devices. For instance, let's
                                        say that we have the following layout for a slider element:
                                    </p>

                                    
                                    <div style="padding-bottom: 10px; padding-top: 10px;">
                                        <img src="https://i.imgur.com/4e6As72.png" alt="Slider Layout">
                                    </div>

                                    <p>
                                        We need to ensure that the slider
                                        is anchored to the right side of the screen, while allowing
                                        for some padding or margin. In the example, this padding/margin
                                        is set to 2% of the screen width, so we need to adjust the
                                        normalized values for the anchor and pivot settings:
                                    </p>

                                    <div style="padding-bottom: 10px; padding-top: 10px;">
                                        <img src="https://i.imgur.com/a9lHWgt.png" alt="Slider Layout">
                                    </div>

                                    <p>
                                        The
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">anchor.Max X</code>
                                        value represents the normalized position of the right edge of the anchored RectTransform
                                        relative to the parent RectTransform's right edge. To leave a 2% margin on the
                                        right side of the screen, this value should be set to 0.98 (remember they are
                                        normalized).
                                        Similarly, setting
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">anchor.Min X</code>
                                        to 0.68 ensures that the left edge of the RectTransform is positioned at 68%
                                        of the parent's width, effectively occupying 30% of the screen width.
                                        Lastly, the pivot has to be set to the right corner of the RectTransform by setting
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">Pivot X</code>
                                        to 1, ensuring proper alignment with the right-most side of the screen.
                                    </p>
                                    <p>
                                        <video autoplay loop muted playsinline style="max-width: 100%; height: auto; padding-bottom: 10px; padding-top: 10px; ">
                                            <source src="https://i.imgur.com/TP0t0qa.mp4" type="video/mp4">
                                            Your browser does not support the video tag.
                                        </video>
                                    </p>

                                    <p style="padding-bottom: 10px"></p>

                                    <p>
                                        Also, unique device features like phone notches must be taken
                                        into account. Incorporating features like 'Safe Areas' ensures that
                                        UI elements remain visible and unaffected by device-specific design
                                        elements.
                                    </p>

                                    <p>
                                        Here's how it works:
                                    </p>

                                    <pre id="14" class="prettyprint linenums custom-prettify" style=""></pre>

                                    <p>
                                        The script retrieves the device's safe area from the
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">Screen</code>
                                        class and adjusts the size of the panel, containing UI graphics/elements,
                                        to match the safe area. This ensures that UI elements are properly
                                        positioned and remain visible regardless of the device's screen
                                        size or aspect ratio.
                                    </p>

                                    <p>
                                        Additionally, to improve performance when dealing with numerous
                                        safe area objects, I consolidated all of the
                                        screen size and orientation checks into a single script that polls
                                        inside an async task. This script then propagates an event to all safe
                                        area objects whenever a change is detected. This approach significantly
                                        reduces unnecessary overhead, which is particularly good
                                        on mobile platforms.
                                    </p>

                                    <p style="padding-bottom: 10px"></p>

                                </div>

                                <div class="accordion">
                                    <div class="accordion-header">
                                        <span class="accordion-text" style="margin-left: 5px;">​Optimization</span>
                                        <div class="accordion-icon">
                                            <i class="fa fa-times" aria-hidden="true"></i>
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-inner">



                                    <p>
                                        The methodology I followed in this project aligns with the one discussed in
                                        
                                        <a href="/projects/atomic-tiles/" style="color: #53a6fd;">Atomic Tiles</a>.
                                        In general, during development, I remained mindful of the GPU workload
                                        (e.g., draw calls, set pass calls),
                                        CPU workload, and memory footprint, profiling regularly to make sure
                                        everything fits within the budget.
                                        I believe that using optimized developing practices from the early stages of
                                        development can save a lot of time and effort later on.
                                        However, this doesn't mean micro-optimizing unnecessary parts prematurely.
                                        Therefore, I aim to balance writing efficient
                                        code with maintaining development speed. This means
                                        avoiding micro-optimizations before identifying the actual bottlenecks
                                        of the application. That said,
                                        during the profiling phase, it's important to ensure
                                        the cumulative workload stays within the allocated budget (time-MS and memory limits)
                                        on the target platform, and bottlenecks becomes the main focus to achieve this.
                                    </p>

                                    <p>
                                        For instance, let's focus solely on the gameplay programming. If the total budget falls
                                        below 16 MS for mobile development and you have only 2-3 MS for game logic
                                        (say that graphics take up a significant portion of that budget),
                                        it becomes important to use of optimized code, particularly in areas
                                        that run continuously or within extensive loops. Minimizing unnecessary polling and
                                        adopting event-driven approaches can significantly reduce overhead.
                                        Additionally, avoiding unnecessary garbage allocation in managed languages like C#
                                        is essential to prevent substantial Garbage Collector spikes that could exceed
                                        the budget, resulting in a drop in framerate on the target device.
                                    </p>

                                    <p>
                                        However, when evaluating the project as a whole, the initial focus should be on
                                        optimizing the areas that consume the most time within the allocated budget,
                                        as aspects like rendering can occupy unnecessary resources that could otherwise be streamlined.
                                    </p>

                                    <p>
                                        Tweaking the framerate is a quick adjustment that can have a drastic
                                        impact on performance in mobile development. Phones use much more CPU power
                                        and their battery drain faster when running at 60 fps. Even in an empty project,
                                        this remains true because the device renders the screen 60 times per second.
                                        Limiting the game to 30 fps can immediately double performance but, unfortunately,
                                        this may not be feasible for most games. In games where animation and
                                        smooth motion are important, running below 60 fps is out of the question;
                                        otherwise, the game may appear choppy and unresponsive.
                                        Thus, optimizing it to maintain 60 fps while mitigating heat generation
                                        and preserving battery life is crucial.
                                    </p>

                                    <p>
                                        For this particular game, where gameplay often involves idling until an action occurs,
                                        it was possible to render at lower framerates during idle periods and increase it to 60 fps
                                        during actions or animations.
                                        However, reducing the framerate may not always feel right, as it can lead to
                                        missed player inputs and an
                                        unresponsive game feel. Fortunately, Unity (as many engines and frameworks) provide a
                                        class called
                                        <code class="inline-code-prettify custom-inline-code prettyprint linenums custom-prettify">OnDemandRendering</code>
                                        that is suited for this scenario. Unlike adjusting the framerate,
                                        this class effectively reduces rendering speed without impacting
                                        internal tick processing (including inputs):
                                    </p>

                                    <pre id="15" class="prettyprint linenums custom-prettify" style=""></pre>

                                    <p>
                                        In the code snippet above, the game is rendered at 10 frames per second until an action occurs,
                                        at which point rendering is restored to 60 frames per second, ensuring fluid and
                                        natural animations. As a result, after having done all the optimizing, devices consume
                                        less battery and they won't get excessive heating at any point while running the application.
                                    </p>

                                    <p style="padding-bottom: 10px"></p>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                
            </div>


        </div>
    </div>



    
    <div id="social-pagecover-container">
        
    </div>
    
    

    <script type="text/javascript" src="/js/projects/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="/js/projects/bootstrap.js"></script>
    <script type="text/javascript" src="/js/projects/custom.js"></script>


    <footer class="footer bg-black small_2 text-center text-white-50" style="margin: 0 15px 0 15px">

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="/js/scripts.js"></script>
    <script src="/js/trigger.js"></script>

    
    
    <div class="container px-4 px-lg-5">
        <p style="padding-bottom: 24px;"></p>
        
        Copyright &copy;
        <script>document.write(new Date().getFullYear());</script> by Guille Sanchez
        <p style="padding-bottom: 24px"></p>
    </div>
</footer>




    <iframe scrolling="no" frameborder="0" allowtransparency="true" title="Twitter settings iframe" style="display: none;"></iframe><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe"></iframe>
</body>
<grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration>
</html>
